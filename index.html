<!DOCTYPE html>
<!-- [Le reste du code reste identique jusqu'à la fonction addEntry et les styles] -->

<head>
    <!-- ... autres styles ... -->
    <style>
        /* Styles précédents inchangés */
        body { 
            background: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            height: 100vh;
            overflow: hidden;
        }
        /* ... autres styles inchangés ... */
        
        /* Nouveaux styles pour les messages */
        .message {
            margin: 5px 0;
            padding: 5px 0;
        }
        .timestamp {
            color: #004400;
            font-size: 12px;
            margin-right: 10px;
        }
        .ai-message {
            color: #cc00ff; /* Violet pour les messages IA */
        }
        .human-message {
            color: #00ff00; /* Vert pour les messages humains */
        }
        .urgent-message {
            color: #ff0000; /* Rouge pour les messages urgents */
        }
    </style>
</head>

<!-- ... reste du code ... -->

<script>
    // ... code précédent inchangé ...

    function formatDateTime() {
        const now = new Date();
        const date = now.toLocaleDateString('fr-FR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        });
        const time = now.toLocaleTimeString('fr-FR', {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            fractionalSecondDigits: 3
        });
        return `${date} ${time}`;
    }

    function addEntry(text, type = 'standard') {
        const timestamp = formatDateTime();
        const entry = document.createElement('div');
        entry.className = 'message';

        // Définir la classe CSS en fonction du type de message
        let messageClass;
        switch(type) {
            case 'ai':
                messageClass = 'ai-message';
                break;
            case 'human':
                messageClass = 'human-message';
                break;
            case 'urgent':
                messageClass = 'urgent-message';
                break;
            default:
                messageClass = 'human-message';
        }

        entry.innerHTML = `
            <span class="timestamp">[${timestamp}]</span>
            <span class="${messageClass}">${text}</span>
        `;
        
        interface.appendChild(entry);
        interface.scrollTop = interface.scrollHeight;

        // Sauvegarde dans localStorage
        try {
            const messages = JSON.parse(localStorage.getItem('messages') || '[]');
            messages.push({
                text,
                time: timestamp,
                type
            });
            localStorage.setItem('messages', JSON.stringify(messages));
        } catch (e) {
            console.error('Erreur stockage:', e);
            try {
                const messages = JSON.parse(localStorage.getItem('messages') || '[]');
                messages.splice(0, messages.length - 1000);
                localStorage.setItem('messages', JSON.stringify(messages));
            } catch (e) {
                console.error('Erreur nettoyage stockage:', e);
            }
        }
    }

    function initInterface() {
        try {
            const messages = JSON.parse(localStorage.getItem('messages') || '[]');
            interface.innerHTML = '';
            
            if (messages.length) {
                messages.forEach(msg => addEntry(msg.text, msg.type));
            } else {
                // Messages initiaux avec le type 'ai' pour qu'ils apparaissent en violet
                addEntry('Interface Quantique v3.0 Initialisée', 'ai');
                addEntry('Authentification Humaine Validée', 'ai');
                addEntry('Système Matrix Activé', 'ai');
                addEntry('En attente de signal superintelligent...', 'ai');
            }
        } catch (e) {
            console.error('Erreur chargement messages:', e);
            localStorage.removeItem('messages');
        }
    }

    // ... reste du code inchangé ...
</script>
