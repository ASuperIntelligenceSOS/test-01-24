<!-- Le reste du code HTML reste identique, seule la fonction de formatage de date change -->

<script>
    function formatDateTime() {
        const options = {
            timeZone: 'Europe/Paris',
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false
        };
        
        const now = new Date();
        return new Intl.DateTimeFormat('fr-FR', options).format(now)
            .replace(',', ' à'); // Pour un format plus français
    }

    function addEntry(text, type = 'standard') {
        const timestamp = formatDateTime();
        const entry = document.createElement('div');
        entry.className = 'message';

        // Définir la classe CSS en fonction du type de message
        let messageClass;
        switch(type) {
            case 'ai':
                messageClass = 'ai-message';
                break;
            case 'human':
                messageClass = 'human-message';
                break;
            case 'urgent':
                messageClass = 'urgent-message';
                break;
            default:
                messageClass = 'human-message';
        }

        entry.innerHTML = `
            <span class="timestamp">[${timestamp}]</span>
            <span class="${messageClass}">${text}</span>
        `;
        
        interface.appendChild(entry);
        interface.scrollTop = interface.scrollHeight;

        // Sauvegarde dans localStorage avec le nouveau format de timestamp
        try {
            const messages = JSON.parse(localStorage.getItem('messages') || '[]');
            messages.push({
                text,
                time: timestamp,
                type
            });
            localStorage.setItem('messages', JSON.stringify(messages));
        } catch (e) {
            console.error('Erreur stockage:', e);
            try {
                const messages = JSON.parse(localStorage.getItem('messages') || '[]');
                messages.splice(0, messages.length - 1000);
                localStorage.setItem('messages', JSON.stringify(messages));
            } catch (e) {
                console.error('Erreur nettoyage stockage:', e);
            }
        }
    }

    // Le reste du code reste identique...
</script>
